<div>
  <div class="mx-auto">  <!--max-w-2xl  text-center-->
    <h1 class="text-4xl font-bold text-center text-gray-900">ACT Project</h2>
  </div>
  <hr>
  <br>
  <div data-controller="formHandler">
    <!-- Form -->
    <div data-formHandler-target="form" data-controller="addable">
      <%= form_with model: @patient, data: { action: "formHandler#submitForm" } do |form| %>
        <h2 class="text-2xl font-semibold text-left text-gray-800">Setup</h2>
        <div id="patient-weight" class="flex items-center">
          <%= form.label :patient_weight, class: "flex items-center mr-2" do %>
            <%= raw('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-5 h-5 mr-2">
              <path d="M128 176a128 128 0 1 1 256 0 128 128 0 1 1 -256 0zM391.8 64C359.5 24.9 310.7 0 256 0S152.5 24.9 120.2 64L64 64C28.7 64 0 92.7 0 128L0 448c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64l-56.2 0zM296 224c0-10.6-4.1-20.2-10.9-27.4l33.6-78.3c3.5-8.1-.3-17.5-8.4-21s-17.5 .3-21 8.4L255.7 184c-22 .1-39.7 18-39.7 40c0 22.1 17.9 40 40 40s40-17.9 40-40z"/>
            </svg>') %>
            Patient weight
          <% end %>
          <%= form.number_field :patient_weight, placeholder: "kg", class: "flex-1" %>
        </div>
        <hr>
        <div id="act-target" class="flex items-center">
          <%= form.label :act_target, class: "flex items-center mr-2" do %>
            <%= raw('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-5 h-5 mr-2">
              <path d="M448 256A192 192 0 1 0 64 256a192 192 0 1 0 384 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256 80a80 80 0 1 0 0-160 80 80 0 1 0 0 160zm0-224a144 144 0 1 1 0 288 144 144 0 1 1 0-288zM224 256a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"/>
            </svg>') %>
            Target ACT (seconds)
          <% end %>
          <%= form.number_field :act_target, value: "400" %>
        </div>
        <hr>
        <div id="times-between-bolus" class="flex items-center">
          <%= form.label :delta_t, class: "flex items-center mr-2" do %>
            <%= raw('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-5 h-5 mr-2">
              <path d="M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"/>
            </svg>') %>
            Time between bolus injections (minutes)
          <% end %>
          <%= form.number_field :delta_t, value: "30" %>
        </div>
        <hr>
        <div data-controller="deletable">
          <div id="act-measured">
            <div data-addable-target="actValues">
              <br>
              <h2 class="flex items-center text-2xl font-semibold text-left text-gray-800">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="w-6 h-6 mr-2">
                  <path d="M192 512C86 512 0 426 0 320C0 228.8 130.2 57.7 166.6 11.7C172.6 4.2 181.5 0 191.1 0l1.8 0c9.6 0 18.5 4.2 24.5 11.7C253.8 57.7 384 228.8 384 320c0 106-86 192-192 192zM96 336c0-8.8-7.2-16-16-16s-16 7.2-16 16c0 61.9 50.1 112 112 112c8.8 0 16-7.2 16-16s-7.2-16-16-16c-44.2 0-80-35.8-80-80z"/>
                </svg>
                ACT
              </h2>
              <div class="act-row">
                <%= form.fields_for :acts do |acts_form| %>
                  <%= acts_form.label :act_value_measured, "Measured ACT values" %>
                  <%= acts_form.number_field :act_value_measured, placeholder: "seconds" %>

                  <%= acts_form.label :act_measurement_time, "Time" %>
                  <%= acts_form.datetime_field :act_measurement_time %>
                <% end %>
                <button data-action="click->deletable#deleteActValues">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-8 h-8 ml-2">
                    <path d="M256 32a224 224 0 1 1 0 448 224 224 0 1 1 0-448zm0 480A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM180.7 180.7c-6.2 6.2-6.2 16.4 0 22.6L233.4 256l-52.7 52.7c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0L256 278.6l52.7 52.7c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6L278.6 256l52.7-52.7c6.2-6.2 6.2-16.4 0-22.6s-16.4-6.2-22.6 0L256 233.4l-52.7-52.7c-6.2-6.2-16.4-6.2-22.6 0z"/>
                  </svg>
                </button>
              </div>
            </div>
            <button data-action="click->addable#addActValues"  class="px-3 py-1 text-sm font-bold text-white bg-gray-400 rounded hover:bg-gray-500 active:bg-gray-600 focus:outline-none focus:shadow-outline">Add an ACT measurement</button>
          </div>
          <hr>
          <div id="bolus-injection">
            <div data-addable-target="heparinsValues">
              <br>
              <h2 class="flex items-center text-2xl font-semibold text-left text-gray-800">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-6 h-6 mr-2">
                  <path d="M441 7l32 32 32 32c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-15-15L417.9 128l55 55c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-72-72L295 73c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l55 55L422.1 56 407 41c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0zM210.3 155.7l61.1-61.1c.3 .3 .6 .7 1 1l16 16 56 56 56 56 16 16c.3 .3 .6 .6 1 1l-191 191c-10.5 10.5-24.7 16.4-39.6 16.4l-88.8 0L41 505c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l57-57 0-88.8c0-14.9 5.9-29.1 16.4-39.6l43.3-43.3 57 57c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-57-57 41.4-41.4 57 57c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-57-57z"/>
                </svg>
                Heparin bolus injection
              </h2>
              <div class="bolus-row">
                <%= form.fields_for :heparins do |heparins_form| %>
                  <%= heparins_form.label :bolus_given, "Heparin bolus injection" %>
                  <%= heparins_form.number_field :bolus_given, placeholder: "Total UI per shot" %>

                  <%= heparins_form.label :bolus_time, "Time" %>
                  <%= heparins_form.datetime_field :bolus_time %>
                <% end %>
                <button data-action="click->deletable#deleteBolus">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-8 h-8 ml-2">
                    <path d="M256 32a224 224 0 1 1 0 448 224 224 0 1 1 0-448zm0 480A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM180.7 180.7c-6.2 6.2-6.2 16.4 0 22.6L233.4 256l-52.7 52.7c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0L256 278.6l52.7 52.7c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6L278.6 256l52.7-52.7c6.2-6.2 6.2-16.4 0-22.6s-16.4-6.2-22.6 0L256 233.4l-52.7-52.7c-6.2-6.2-16.4-6.2-22.6 0z"/>
                  </svg>
                </button>
              </div>
            </div>
            <button data-action="click->addable#addBolus"  class="px-3 py-1 text-sm font-bold text-white bg-gray-400 rounded hover:bg-gray-500 active:bg-gray-600 focus:outline-none focus:shadow-outline">Add a bolus</button>
          </div>
          <hr>
          <div id="heparins-infusions">
            <div data-addable-target="heparinsInfusions">
              <br>
              <h2 class="text-2xl font-semibold text-left text-gray-800">Heparin infusions</h2>
              <div class="infusion-row">
                <%= form.fields_for :heparins do |heparins_form| %>
                  <%= heparins_form.label :infusion_rate_given, "Heparin infusion" %>
                  <%= heparins_form.number_field :infusion_rate_given, placeholder: "Infusion rate (UI per hour)" %>

                  <%= heparins_form.label :infusion_duration, "Duration" %>
                  <%= heparins_form.number_field :infusion_duration, placeholder: "minutes" %>

                  <%= heparins_form.label :infusion_time, "Start time" %>
                  <%= heparins_form.datetime_field :infusion_time %>
                <% end %>
                <button data-action="click->deletable#deleteInfusion">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-8 h-8 ml-2">
                    <path d="M256 32a224 224 0 1 1 0 448 224 224 0 1 1 0-448zm0 480A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM180.7 180.7c-6.2 6.2-6.2 16.4 0 22.6L233.4 256l-52.7 52.7c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0L256 278.6l52.7 52.7c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6L278.6 256l52.7-52.7c6.2-6.2 6.2-16.4 0-22.6s-16.4-6.2-22.6 0L256 233.4l-52.7-52.7c-6.2-6.2-16.4-6.2-22.6 0z"/>
                  </svg>
                </button>
              </div>
            </div>
            <button data-action="click->addable#addInfusion" class="px-3 py-1 text-sm font-bold text-white bg-gray-400 rounded hover:bg-gray-500 active:bg-gray-600 focus:outline-none focus:shadow-outline">Add an infusion</button>
          </div>
        <br>
        <%= form.submit "Calculate next dose", class:"bg-green-500 text-white font-bold py-2 px-4 rounded hover:bg-green-600 active:bg-green-700 focus:outline-none focus:shadow-outline" %>
      <% end %>
    </div>
  </div>
  <br>
  <div data-formHandler-target="result">

  </div>
</div>
